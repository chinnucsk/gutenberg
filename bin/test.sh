#!/bin/sh

curl -v -X POST \
    -H "accept: application/json" \
    -H "content-type: application/json" \
    http://127.0.0.1:8098/mapred --data @-<<EOF
{
  "query":
  [
    {"map":{"language":"erlang"
           ,"module":"gutenberg"
           ,"function":"map_word_count"}}
   ,{"reduce":{"language":"erlang"
              ,"module":"gutenberg"
              ,"function":"reduce_word_count"}}
   ,{"reduce":{"language":"erlang"
              ,"module":"riak_kv_mapreduce"
              ,"function":"reduce_identity"}}
  ]
 ,"inputs":
  [
    ["book","adventures-of-huckleberry-finn"]
   ,["book","the-adventures-of-tom-sawyer"]
   ,["book","around-the-world-in-80-days"]
   ,["book","peter-pan"]
   ,["book","great-expectations"]
   ,["book","the-history-of-the-decline-and-fall-of-the-roman-empire"]
   ,["book","the-life-and-adventures-of-robinson-crusoe"]
   ,["book","alices-adventures-in-wonderland"]
   ,["book","the-importance-of-being-earnest"]
   ,["book","the-three-musketeers"]
   ,["book","a-christmas-carol"]
   ,["book","paradise-lost"]
   ,["book","the-count-of-monte-cristo"]
   ,["book","gullivers-travels"]
   ,["book","anne-of-green-gables"]
   ,["book","the-jungle-book"]
   ,["book","oliver-twist"]
   ,["book","the-war-of-the-worlds"]
   ,["book","pride-and-prejudice"]
   ,["book","the-iliad-of-homer"]
   ,["book","the-tale-of-peter-rabbit"]
   ,["book","war-and-peace"]
   ,["book","moby-dick"]
   ,["book","le-corbeau"]
   ,["book","the-odyssey-of-homer"]
   ,["book","the-wonderful-wizard-of-oz"]
   ,["book","little-women"]
   ,["book","treasure-island"]
   ,["book","adventures-of-huckleberry-finn"]
   ,["book","a-tale-of-two-cities"]
   ,["book","the-return-of-sherlock-holmes"]
   ,["book","the-adventures-of-sherlock-holmes"]
   ,["book","sense-and-sensibility"]
   ,["book","memoirs-of-sherlock-holmes"]
   ,["book","through-the-looking-glass"]
   ,["book","hamlet"]
   ,["book","walden"]
   ,["book","frankenstein"]
   ,["book","king-arthur-and-his-knights"] 
  ]
}
EOF
